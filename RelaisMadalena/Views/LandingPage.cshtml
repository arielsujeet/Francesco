@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using ClientDependency.Core
@using ClientDependency.Core.Mvc
@using Umbraco.Web
@{
    Layout = null;
    var sv = HttpContext.Current.Request.ServerVariables;
    bool isMobile = false;
    string u = Request.ServerVariables["HTTP_USER_AGENT"];
    System.Text.RegularExpressions.Regex b = new System.Text.RegularExpressions.Regex(@"(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino", System.Text.RegularExpressions.RegexOptions.IgnoreCase | System.Text.RegularExpressions.RegexOptions.Multiline);
    System.Text.RegularExpressions.Regex v = new System.Text.RegularExpressions.Regex(@"1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-", System.Text.RegularExpressions.RegexOptions.IgnoreCase | System.Text.RegularExpressions.RegexOptions.Multiline);
    if (u != null) { if (b.IsMatch(u) || v.IsMatch(u.Substring(0, 4))) { isMobile = true; } }
    if (isMobile == true)
    {
        if (Request["mobile"] == null)
        {
            Response.Cookies["mobile"].Value = "1";
            Response.Cookies["mobile"].Expires = DateTime.Now.AddDays(7);
        }
    }
    else
    {
        if (Request["mobile"] == "1") { Response.Cookies["mobile"].Value = ""; }
    }
    var canonicalUrl = "https://www.relaismaddalena.com/";
    if (Request.ServerVariables["HTTP_HOST"].ToLower().StartsWith("www"))
    {
        canonicalUrl = string.Concat("https://www.relaismaddalena.com/" + Model.Url());
    }
    else
    {
        canonicalUrl = string.Concat("https://www.relaismaddalena.com/" + Model.Url());
    }

    Html.RequiresCss("~/css/bootstrap.min.css");
    Html.RequiresCss("~/css/flexslider.css");
    Html.RequiresCss("~/css/style.css");
    Html.RequiresCss("~/css/landingCore.css");
    var home = Model.Root();
}
<!doctype html>
<html class="no-js" lang="">
<head>
    <!-- Google Tag Manager -->
    <script>
        (function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-W9PWNV5');
    </script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="/imageGen.ashx?image=/media/2742/favicon.png&width=16&format=png&compression=80" type="image/png">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <link rel="canonical" href="@canonicalUrl" />
    <title>
        @if (Model.HasValue("metaTitle"))
        {
            @Model.Value("metaTitle")
        }
        else
        {
            @Model.Name
        }
        | @home.Value("siteTitle")
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="@home.Value("metaDescription")">

    @if (isMobile == true)
    {
        <meta name="viewport" content="width=device-width, user-scalable=no" />
    }
    else
    {
        <meta name="viewport" content="width=device-width, initial-scale=1">
    }

    @{
        var relations = Services.RelationService.GetByParentOrChildId(Model.Id);
        foreach (var c in relations)
        {
            @*<link rel="alternate" hreflang="en-US" href="@Html.Raw("https://relaismaddalena.com"+Umbraco.Content(c.ParentId).Url())" />
            <link rel="alternate" hreflang="it-IT" href="@Html.Raw("https://relaismaddalena.com"+Umbraco.Content(c.ChildId).Url())" />*@
        }
    }
    @if (Model.HasValue("carouselImages"))
    {
        var k = 0;
        foreach (var img in Model.Value<string>("carouselImages").Split(','))
        {
            k++;
            if (k == 1)
            {
                @*<meta property="og:image" content='@Html.Raw("https://relaismaddalena.com/"+Umbraco.Media(img).Url()+"?compression=60&width=400")' />
                <meta name="twitter:image" content='@Html.Raw("https://relaismaddalena.com/"+Umbraco.Media(img).Url()+"?compression=60&width=400")' />*@
            }
        }
    }
    else
    {
        @*<meta property="og:image" content='@Html.Raw("https://relaismaddalena.com/"+Umbraco.Media(1055).Url()+"?compression=60&width=400")' />
        <meta name="twitter:image" content='@Html.Raw("https://relaismaddalena.com/"+Umbraco.Media(1055).Url()+"?compression=60&width=400")' />*@
    }

    @if (Model.HasValue("metaDescription"))
    {
        <meta name="description" property="og:description" content="@Model.Value("metaDescription")" />
    }
    else if (Model.HasValue("siteDescription"))
    {
        <meta name="description" property="og:description" content='@home.Value("siteDescription")' />
    }
    else
    {
        <meta name="description" property="og:description" content="@Model.Name" />
    }

    <meta property="og:site_name" content="@Model.Value("_siteTitle")" />
    <meta property="go:title" content='@Model.Name' />
    <meta property="og:url" content="@canonicalUrl" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Boutique hotel B&amp;B in Rome unbeatable location – Romantic rooms with view –  Breakfast included – Special offers and promotions">

    <meta property="og:type" content="place">
    <meta property="og:title" content="Rome Hotels">
    <meta property="og:url" content="https://romehotels.center/">
    <meta property="og:image" content="https://relaismaddalena.com//media/2682/header-grande-veduta.jpg">
    <meta property="place:location:latitude" content="">
    <meta property="place:location:longitude" content="">

    @*twiiter card*@
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" @Html.Raw("content='@RelaisMaddalena'") />
    <meta name="twitter:title" content="@Model.Name" />
    <meta name="twitter:description" content="@home.Value("siteDescription")" />
    @Html.Raw(home.Value("googleAnalytics"))@*, recursive: true)*@

    <style>
        .top-bar .info a {
            font-size: 13px;
            display: inline-block;
            line-height: 15px;
        }

        a.no_icon:before {
            display: none !important;
        }

        .hotelItem {
            border-radius: 8px;
        }

        .info {
            float: none !important;
            display: inline-block;
        }

        @@media (max-width:767px) {
            .info a {
                padding: 0 4px !IMPORTANT;
                font-size: 13px !IMPORTANT;
                display: inline-block !important;
            }

            .info {
                width: inherit !important;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W9PWNV5"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header>
        <div class="container">
            <div class="top-bar" style="float:right;">
                <span class="info iconfa new_links">@Model.Value("topLinks")@*, recursive: true)*@</span>
                <div class="info iconfa" id="myBtn">
                    @*<a href="https://relaismaddalena.com/" target="_blank" class="no_icon">Relais Maddalena</a>
                        <a href="https://relaismonnalisa.com/" target="_blank" class="no_icon">Relais Monnalisa</a>	*@
                    <a href="https://relaismaddalena.com/contact-us/">Contact Us</a>
                </div>
                @*
                     <li style="display:none;" id="elinaLoginFE" class="dropdown guest_login ">
                    </li>*@
            </div>
        </div>
        <nav class="navbar navbar-default">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <div id="anchorNavigation">
                    <div class="container">
                        <ul class="nav nav-tabs">
                            @if (Model.HasValue("hotelTitle"))
                            {
                                <li role="presentation"><a href="#HotelAmenities"> @Model.Value("hotelTitle")</a></li>
                            }
                            @if (Model.HasValue("serviceTitle"))
                            {
                                <li role="presentation"><a href="#Services"> @Model.Value("serviceTitle")</a></li>
                            }

                            @if (Model.HasValue("promotionTitle"))
                            {
                                <li role="presentation"><a href="#Promotions"> @Model.Value("promotionTitle")</a></li>
                            }

                            @if (Model.HasValue("locationTitle"))
                            {
                                <li role="presentation"><a href="#GoogleMapArea"> @Model.Value("locationTitle")</a></li>
                            }
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        @if (Model.HasValue("pageHeaderLogo"))
        {
            var nodeImg = Model.Value<IPublishedContent>("pageHeaderLogo");
            //var nodeImg = Umbraco.Media(nodeImgId);
            <div class="pageHeaderLogo">
                <img src="@(@nodeImg?.Url())?width=160&format=png&compression=90" alt="Rome Hotels Center">
            </div>
        }
    </header>
    <div id="spotlightPictureContainer" class="">
        <div id="headerSection">
            <div class="col-md-5" style="float:none;margin:0 auto;">
                <h1 class="pageH1title col-md-10" style="float:none;margin:0 auto;">
                    @if (Model.HasValue("pageH1title"))
                    {
                        <span> @Model.Value("pageH1title")</span>
                        
                    }

                    @if (Model.HasValue("pageSubtitle"))
                    {
                        <span class="pageSubtitle">@Model.Value("pageSubtitle")</span>
                    }
                </h1>
                @{ Html.RenderPartial("FeatureSlider"); }
            </div>
        </div>
        @{ Html.RenderPartial("SliderLanding"); }
        <div class="gradientOverlay">
        </div>
    </div>
    <!-- /container -->
    @{ Html.RenderPartial("BookingElementLanding"); }
    <div id="HotelAmenities">
        @{ Html.RenderPartial("HotelAmenities"); }
    </div>
    <div id="Promotions">
        @Html.GetGridHtml(Model, "gridPromotionsLayout")
    </div>

    @if (Model.HasValue("backgroundImage"))
    {
        var nodeImg = Model.Value<IPublishedContent>("backgroundImage");
        //var nodeImg = Umbraco.Media(nodeImgId);
        <div id="Services" style="background-image:url('@nodeImg.Url()');min-height:500px;width:100%;Background-repeat:no-repeat;background-size:cover;background-position: center;">
            @*@Html.GetGridHtml(Model, "gridServicesLayout")*@
        </div>
    }
    <div id="GoogleMapArea">
        @*@{ Html.RenderPartial("LandingMap"); }*@
    </div>
    <footer class="sitemap">
        <div class="container">
            <div class="row">
                <div class="col-xs-8 col-sm-9 col-md-9">
                    @*@{ Html.RenderPartial("FooterScript"); }*@
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="languages">
                        <li>
                            @*<a href="@Umbraco.Content(3467).Url()">English</a>*@
                        </li>
                        <li>
                            @*<a href="@Umbraco.Content(3827).Url()">Italiano</a>*@
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    @if (isMobile == true)
    {
        <!-- CSS -->
        @*<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">*@
        @Html.Raw(Html.RenderCssHere())
    }
    @if (isMobile == false)
    {
        <!-- CSS -->
        @* <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">*@
        @Html.Raw(Html.RenderCssHere())
    }
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href='//fonts.googleapis.com/css?family=Ek+Mukta|Arapey' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css">
    @*-- Javascripts --*@
    <script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    @Html.Raw(Html.RenderJsHere())
    @{
        Html.RequiresJs("~/scripts/core.js");
        Html.RequiresJs("~/scripts/elinaLogin.js");
        Html.RequiresJs("~/scripts/js-propertygallery.js");
        Html.RequiresJs("~/scripts/jquery.flexslider-min.js");
        Html.RequiresJs("~/scripts/PliableForm.js");
    }
    <!-- Trigger/Open The Modal -->
    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <script type="text/javascript" src="https://assets.freshdesk.com/widget/freshwidget.js"></script>
            <style type="text/css" media="screen, projection">
	@*@import url(http://assets.freshdesk.com/widget/freshwidget.css);*@
            </style>
            <iframe title="Feedback Form" class="freshwidget-embedded-form" id="freshwidget-embedded-form" src="https://concierge.romehotels.center/widgets/feedback_widget/new?&widgetType=embedded&screenshot=no" scrolling="no" height="500" width="100%" frameborder="0">
            </iframe>
        </div>
    </div>
</body>
</html>
